from flask import Flask, jsonify
from flask_cors import CORS
# import serial

app = Flask(__name__)
CORS(app)
# ser = serial.Serial('/dev/ttyS0')


transport_coordinates_list =  [
[120.983177,14.535756],[120.983186,14.535513],[120.983206,14.534925],[120.983237,14.534154],[120.983251,14.533787],[120.983265,14.533453],[120.983269,14.53336],[120.983272,14.533291],[120.983276,14.533187],[120.983281,14.53309],[120.983282,14.533043],[120.983284,14.532989],[120.983287,14.53291],[120.983344,14.53155],[120.983351,14.531392],[120.983353,14.531307],[120.983362,14.531169],[120.983722,14.531206],[120.984028,14.531239],[120.984266,14.531263],[120.984382,14.531276],[120.984501,14.531288],[120.984713,14.53131],[120.984703,14.53145],[120.984697,14.531526],[120.984644,14.532165],[120.984625,14.532468],[120.984592,14.532868],[120.984579,14.533008],[120.98457,14.533096],[120.984563,14.533147],[120.984503,14.533831],[120.984476,14.534146],[120.98445,14.534515],[120.984453,14.534567],[120.984467,14.534608],[120.984537,14.534688],[120.984605,14.534722],[120.984669,14.534763],[120.984726,14.534812],[120.984777,14.534867],[120.98482,14.534929],[120.984856,14.534994],[120.984882,14.535064],[120.9849,14.535136],[120.984928,14.535201],[120.984952,14.535246],[120.984991,14.535279],[120.985548,14.535405],[120.986715,14.535668],[120.987127,14.535761],[120.987232,14.535785],[120.987411,14.535825],[120.987696,14.535889],[120.987916,14.535939],[120.988047,14.535968],[120.988353,14.536037],[120.988748,14.536126],[120.988876,14.536155],[120.98905,14.536196],[120.989145,14.536218],[120.989847,14.536375],[120.990338,14.536485],[120.990824,14.536594],[120.991468,14.536738],[120.991638,14.536774],[120.992054,14.536868],[120.992081,14.536874],[120.992264,14.536914],[120.992371,14.536933],[120.992619,14.536981],[120.992764,14.537016],[120.99291,14.537046],[120.993745,14.537234],[120.994185,14.537329],[120.994992,14.537526],[120.995207,14.537566],[120.995486,14.537596],[120.995507,14.537598],[120.995768,14.537624],[120.996712,14.537663],[120.997173,14.537645],[120.99733,14.537643],[120.997508,14.537633],[120.998343,14.53757],[120.999199,14.537502],[120.99969,14.537461],[121.000181,14.53742],[121.000562,14.537401],[121.000659,14.537399],[121.000952,14.537409],[121.001121,14.537419],[121.001257,14.537427],[121.001425,14.537448],[121.001498,14.537457],[121.001539,14.537463],[121.002685,14.537612],[121.003129,14.53767],[121.003314,14.537693],[121.004122,14.537794],[121.004211,14.537805],[121.004409,14.537829],[121.004467,14.537837],[121.005188,14.537927],[121.006061,14.538043],[121.006334,14.538078],[121.006566,14.538107],[121.006691,14.538122],[121.006737,14.538128],[121.007675,14.538254],[121.007822,14.538271],[121.008091,14.538303],[121.008551,14.538368],[121.009397,14.538488],[121.010735,14.53866],[121.010826,14.538673],[121.011187,14.538723],[121.012109,14.538876],[121.012493,14.538939],[121.012681,14.53897],[121.0134,14.539096],[121.013404,14.539096],[121.013603,14.539193],[121.013614,14.539195],[121.01391,14.539273],[121.014192,14.539355],[121.014382,14.539414],[121.014606,14.539496],[121.014827,14.539573],[121.015282,14.539741],[121.015466,14.539819],[121.015656,14.539894],[121.016416,14.540218],[121.016705,14.540347],[121.017006,14.540485],[121.018093,14.541045],[121.018274,14.541157],[121.018983,14.541602],[121.019191,14.541721],[121.019814,14.542155],[121.02,14.542289],[121.021367,14.543399],[121.02334,14.545071],[121.023749,14.545417],[121.025041,14.546507],[121.025889,14.547186],[121.026394,14.547585],[121.029618,14.55035],[121.030832,14.55135],[121.03116,14.551624],[121.032083,14.552361],[121.03299,14.553143],[121.033235,14.553348],[121.03375,14.553766],[121.034691,14.554567],[121.034741,14.554608],[121.034934,14.554772],[121.035037,14.554855],[121.03514,14.554942],[121.035443,14.555191],[121.03565,14.555363],[121.035897,14.555559],[121.036392,14.555981],[121.036608,14.556188],[121.036795,14.556367],[121.037111,14.556634],[121.037489,14.55696],[121.03789,14.557302],[121.03841,14.557728],[121.038571,14.557881],[121.038974,14.558203],[121.03902,14.558238],[121.039264,14.558442],[121.039355,14.558518],[121.039445,14.558594],[121.039617,14.55874],[121.039642,14.558762],[121.039855,14.558943],[121.040148,14.559192],[121.040395,14.559409],[121.040583,14.559574],[121.040857,14.559819],[121.041097,14.560032],[121.041318,14.560217],[121.042454,14.561168],[121.042953,14.561618],[121.043168,14.561831],[121.043216,14.561883],[121.043434,14.562115],[121.043632,14.562346],[121.043807,14.562575],[121.043949,14.562763],[121.044176,14.563096],[121.044316,14.563333],[121.044379,14.563448],[121.044567,14.5638],[121.044656,14.563949],[121.044741,14.564122],[121.044874,14.564419],[121.044953,14.564605],[121.04499,14.564691],[121.045069,14.564896],[121.045085,14.564942],[121.045135,14.565104],[121.045252,14.565509],[121.045555,14.566573],[121.045597,14.566726],[121.045804,14.567504],[121.04587,14.567807],[121.046169,14.568858],[121.046222,14.569049],[121.046273,14.569112],[121.046282,14.569143],[121.046423,14.569674],[121.046677,14.570622],[121.046693,14.57068],[121.046763,14.570941],[121.04689,14.571279],[121.047167,14.571928],[121.047386,14.572352],[121.047448,14.572476],[121.047634,14.5728],[121.047876,14.57316],[121.048006,14.573341],[121.048081,14.573444],[121.048357,14.573803],[121.048571,14.574103],[121.048949,14.574634],[121.049935,14.575971],[121.050455,14.576659],[121.05052,14.576744],[121.05118,14.577641],[121.051385,14.577921],[121.05158,14.578132],[121.051763,14.578388],[121.051889,14.578575],[121.051928,14.578624],[121.052377,14.57924],[121.05245,14.579339],[121.052888,14.579972],[121.053075,14.580244],[121.053531,14.580878],[121.05357,14.580931],[121.053685,14.581091],[121.05374,14.581174],[121.053803,14.581255],[121.053893,14.58138],[121.05395,14.581459],[121.054382,14.582061],[121.054494,14.582216],[121.054759,14.58259],[121.054949,14.582884],[121.055293,14.583551],[121.055541,14.584044],[121.055591,14.584276],[121.055824,14.584847],[121.05586,14.584936],[121.056078,14.585574],[121.056435,14.586654],[121.056537,14.586963],[121.056789,14.587733],[121.05687,14.58798],[121.057128,14.58878],[121.057741,14.590629],[121.059285,14.595314],[121.059425,14.595752],[121.059581,14.596182],[121.059658,14.596523],[121.059712,14.596793],[121.059749,14.596985],[121.059787,14.597273],[121.059838,14.597633],[121.059854,14.597776],[121.059865,14.597926],[121.05988,14.598129],[121.059889,14.598556],[121.059884,14.598817],[121.059815,14.599645],[121.059814,14.599728],[121.059809,14.59977],[121.059735,14.600263],[121.059713,14.600399],[121.059687,14.600507],[121.059638,14.600739],[121.059551,14.601073],[121.05953,14.601153],[121.059489,14.601315],[121.059381,14.601666],[121.059261,14.601973],[121.059201,14.602112],[121.059156,14.602223],[121.05909,14.602382],[121.058039,14.60467],[121.058025,14.604701],[121.057232,14.606452],[121.05688,14.607238],[121.056811,14.607395],[121.056752,14.607519],[121.056706,14.607619],[121.056643,14.607751],[121.056222,14.608635],[121.055971,14.60916],[121.055857,14.609327],[121.054367,14.61252],[121.054241,14.612775],[121.054169,14.613053],[121.054026,14.613363],[121.053915,14.613603],[121.053874,14.61369],[121.053832,14.613786],[121.053762,14.613944],[121.053504,14.614524],[121.053299,14.614988],[121.053157,14.615171],[121.052749,14.616035],[121.052404,14.616764],[121.051401,14.618934],[121.050868,14.620061],[121.050015,14.621956],[121.049092,14.623936],[121.048811,14.624593],[121.048503,14.625279],[121.048303,14.625719],[121.047811,14.626789],[121.047518,14.62745],[121.047058,14.628403],[121.04678,14.629016],[121.045178,14.632548],[121.045069,14.632766],[121.044955,14.632957],[121.044856,14.633126],[121.044655,14.633435],[121.043605,14.634998],[121.043557,14.635158],[121.042996,14.636034],[121.042499,14.636772],[121.042396,14.636925],[121.042261,14.637125],[121.04217,14.637263],[121.041779,14.637865],[121.041509,14.638281],[121.041434,14.6384],[121.04103,14.639023],[121.040897,14.639227],[121.040578,14.639719],[121.040532,14.639792],[121.040484,14.639868],[121.039583,14.641266],[121.039234,14.641763],[121.039132,14.641922],[121.038634,14.642673],[121.038377,14.643054],[121.036645,14.645739],[121.035407,14.647647],[121.03533,14.647761],[121.034946,14.648331],[121.034834,14.648554],[121.034544,14.648993],[121.034368,14.649171],[121.033317,14.650805],[121.032682,14.651833],[121.032473,14.652177],[121.032327,14.652405],[121.031233,14.654047],[121.030651,14.654938],[121.030584,14.655038],[121.03037,14.655352],[121.030323,14.655416],[121.03028,14.655466],[121.030239,14.655514],[121.030207,14.655549],[121.03017,14.655582],[121.030109,14.655629],[121.030049,14.655671],[121.029985,14.655706],[121.029916,14.655736],[121.029856,14.65576],[121.029803,14.655776],[121.029707,14.655809],[121.029681,14.655815],[121.029301,14.655905],[121.029229,14.65592],[121.029165,14.655935],[121.029106,14.655947],[121.029044,14.655961],[121.028986,14.655973],[121.028925,14.655986],[121.028863,14.656001],[121.028798,14.656014],[121.028602,14.656058],[121.028516,14.656077],[121.027401,14.656323],[121.027298,14.656346],[121.026663,14.65649],[121.026365,14.656558],[121.026038,14.65663],[121.026024,14.656633],[121.025907,14.656659],[121.02409,14.657052],[121.023481,14.657187],[121.022913,14.657312],[121.022546,14.657392],[121.022346,14.657441],[121.022006,14.657511],[121.021855,14.657543],[121.021542,14.6576],[121.020615,14.657717],[121.0206,14.657719],[121.020357,14.657749],[121.020153,14.657769],[121.020069,14.657778],[121.019383,14.657769],[121.019076,14.657764],[121.01873,14.657754],[121.017433,14.657729],[121.015968,14.657701],[121.015752,14.657697],[121.015615,14.657696],[121.015565,14.657695],[121.01521,14.657693],[121.014757,14.657683],[121.014331,14.657674],[121.014172,14.657671],[121.014015,14.657669],[121.013967,14.657668],[121.013894,14.657667],[121.013517,14.657661],[121.013445,14.65766],[121.012736,14.65765],[121.012611,14.657648],[121.01248,14.657646],[121.012052,14.65764],[121.011958,14.657639],[121.011795,14.657636],[121.011708,14.657635],[121.011029,14.657625],[121.010798,14.657622],[121.010238,14.657615],[121.010089,14.657613],[121.008498,14.657594],[121.008461,14.657594],[121.008216,14.65759],[121.007673,14.65758],[121.007419,14.657576],[121.007112,14.65757],[121.0068,14.657565],[121.00658,14.657561],[121.006058,14.657552],[121.005108,14.657536],[121.004828,14.657531],[121.004123,14.657519],[121.003534,14.657509],[121.003485,14.657508],[121.003382,14.657506],[121.003156,14.657502],[121.002418,14.657489],[121.002106,14.657484],[121.002059,14.657483],[121.001905,14.657448],[121.00163,14.657437],[121.000719,14.65743],[121.000325,14.657427],[120.999976,14.657425],[120.999905,14.657425],[120.999085,14.657412],[120.998535,14.657433],[120.998274,14.657438],[120.997818,14.657446],[120.997076,14.657432],[120.996645,14.657431],[120.996312,14.657429],[120.995536,14.657408],[120.994773,14.657394],[120.994027,14.657384],[120.993238,14.657375],[120.993088,14.657372],[120.992975,14.65737],[120.992457,14.657363],[120.992027,14.657355],[120.99186,14.657355],[120.99168,14.657353],[120.990914,14.657343],[120.990659,14.657341],[120.990627,14.657341],[120.990445,14.65734],[120.990367,14.657339],[120.990328,14.657338],[120.99016,14.657335],[120.989673,14.65733],[120.989437,14.657326],[120.9882,14.657305],[120.987648,14.657299],[120.986898,14.657288],[120.98654,14.657282],[120.986197,14.657275],[120.985855,14.65727],[120.985451,14.657263],[120.984746,14.657244],[120.984502,14.657248],[120.984398,14.657276],[120.984295,14.657317],[120.984264,14.65736],[120.984228,14.657397],[120.984186,14.65743],[120.984139,14.657456],[120.984085,14.657476],[120.984027,14.657488],[120.983969,14.657492],[120.98391,14.657486],[120.983854,14.657471],[120.983806,14.657451],[120.983762,14.657424],[120.983722,14.657392],[120.983687,14.657355],[120.983658,14.657314],[120.983635,14.657269],[120.983537,14.657199],[120.983444,14.657163],[120.983232,14.657163],[120.982463,14.657177],[120.98172,14.657181],[120.981641,14.65716],[120.981445,14.657159],[120.981445,14.657159],[120.981076,14.657164],[120.980737,14.657169],[120.980703,14.657169],[120.980496,14.657172],[120.980432,14.657173],[120.980389,14.657174],[120.980094,14.65719],[120.979511,14.657218],[120.979575,14.658747], [120.979575,14.658747],[120.979511,14.657218],[120.980094,14.65719],[120.980389,14.657174],[120.980432,14.657173],[120.980496,14.657172],[120.980703,14.657169],[120.980737,14.657169],[120.981076,14.657164],[120.981445,14.657159],[120.981445,14.657159],[120.981641,14.65716],[120.98172,14.657181],[120.982463,14.657177],[120.983232,14.657163],[120.983444,14.657163],[120.983537,14.657199],[120.983635,14.657269],[120.983658,14.657314],[120.983687,14.657355],[120.983722,14.657392],[120.983762,14.657424],[120.983806,14.657451],[120.983854,14.657471],[120.98391,14.657486],[120.983969,14.657492],[120.984027,14.657488],[120.984085,14.657476],[120.984139,14.657456],[120.984186,14.65743],[120.984228,14.657397],[120.984264,14.65736],[120.984295,14.657317],[120.984398,14.657276],[120.984502,14.657248],[120.984746,14.657244],[120.985451,14.657263],[120.985855,14.65727],[120.986197,14.657275],[120.98654,14.657282],[120.986898,14.657288],[120.987648,14.657299],[120.9882,14.657305],[120.989437,14.657326],[120.989673,14.65733],[120.99016,14.657335],[120.990328,14.657338],[120.990367,14.657339],[120.990445,14.65734],[120.990627,14.657341],[120.990659,14.657341],[120.990914,14.657343],[120.99168,14.657353],[120.99186,14.657355],[120.992027,14.657355],[120.992457,14.657363],[120.992975,14.65737],[120.993088,14.657372],[120.993238,14.657375],[120.994027,14.657384],[120.994773,14.657394],[120.995536,14.657408],[120.996312,14.657429],[120.996645,14.657431],[120.997076,14.657432],[120.997818,14.657446],[120.998274,14.657438],[120.998535,14.657433],[120.999085,14.657412],[120.999905,14.657425],[120.999976,14.657425],[121.000325,14.657427],
[121.000719,14.65743],[121.00163,14.657437],[121.001905,14.657448],[121.002059,14.657483],[121.002106,14.657484],[121.002418,14.657489],[121.003156,14.657502],[121.003382,14.657506],[121.003485,14.657508],[121.003534,14.657509],[121.004123,14.657519],[121.004828,14.657531],[121.005108,14.657536],[121.006058,14.657552],[121.00658,14.657561],[121.0068,14.657565],[121.007112,14.65757],[121.007419,14.657576],[121.007673,14.65758],[121.008216,14.65759],[121.008461,14.657594],[121.008498,14.657594],[121.010089,14.657613],[121.010238,14.657615],[121.010798,14.657622],[121.011029,14.657625],[121.011708,14.657635],[121.011795,14.657636],[121.011958,14.657639],[121.012052,14.65764],[121.01248,14.657646],[121.012611,14.657648],[121.012736,14.65765],[121.013445,14.65766],[121.013517,14.657661],[121.013894,14.657667],[121.013967,14.657668],[121.014015,14.657669],[121.014172,14.657671],[121.014331,14.657674],[121.014757,14.657683],[121.01521,14.657693],[121.015565,14.657695],[121.015615,14.657696],[121.015752,14.657697],[121.015968,14.657701],[121.017433,14.657729],[121.01873,14.657754],[121.019076,14.657764],[121.019383,14.657769],[121.020069,14.657778],[121.020153,14.657769],[121.020357,14.657749],[121.0206,14.657719],[121.020615,14.657717],[121.021542,14.6576],[121.021855,14.657543],[121.022006,14.657511],[121.022346,14.657441],[121.022546,14.657392],[121.022913,14.657312],[121.023481,14.657187],[121.02409,14.657052],[121.025907,14.656659],[121.026024,14.656633],[121.026038,14.65663],[121.026365,14.656558],[121.026663,14.65649],[121.027298,14.656346],[121.027401,14.656323],[121.028516,14.656077],[121.028602,14.656058],[121.028798,14.656014],[121.028863,14.656001],[121.028925,14.655986],
[121.028986,14.655973],[121.029044,14.655961],[121.029106,14.655947],[121.029165,14.655935],[121.029229,14.65592],[121.029301,14.655905],[121.029681,14.655815],[121.029707,14.655809],[121.029803,14.655776],[121.029856,14.65576],[121.029916,14.655736],[121.029985,14.655706],[121.030049,14.655671],[121.030109,14.655629],[121.03017,14.655582],[121.030207,14.655549],[121.030239,14.655514],[121.03028,14.655466],[121.030323,14.655416],[121.03037,14.655352],[121.030584,14.655038],[121.030651,14.654938],[121.031233,14.654047],[121.032327,14.652405],[121.032473,14.652177],[121.032682,14.651833],[121.033317,14.650805],[121.034368,14.649171],[121.034544,14.648993],[121.034834,14.648554],[121.034946,14.648331],[121.03533,14.647761],[121.035407,14.647647],[121.036645,14.645739],[121.038377,14.643054],[121.038634,14.642673],[121.039132,14.641922],[121.039234,14.641763],[121.039583,14.641266],[121.040484,14.639868],[121.040532,14.639792],[121.040578,14.639719],[121.040897,14.639227],[121.04103,14.639023],[121.041434,14.6384],[121.041509,14.638281],[121.041779,14.637865],[121.04217,14.637263],[121.042261,14.637125],[121.042396,14.636925],[121.042499,14.636772],[121.042996,14.636034],[121.043557,14.635158],[121.043605,14.634998],[121.044655,14.633435],[121.044856,14.633126],[121.044955,14.632957],[121.045069,14.632766],[121.045178,14.632548],[121.04678,14.629016],[121.047058,14.628403],[121.047518,14.62745],[121.047811,14.626789],[121.048303,14.625719],[121.048503,14.625279],
[121.048811,14.624593],[121.049092,14.623936],[121.050015,14.621956],[121.050868,14.620061],[121.051401,14.618934],[121.052404,14.616764],[121.052749,14.616035],[121.053157,14.615171],[121.053299,14.614988],[121.053504,14.614524],[121.053762,14.613944],[121.053832,14.613786],[121.053874,14.61369],[121.053915,14.613603],[121.054026,14.613363],[121.054169,14.613053],[121.054241,14.612775],[121.054367,14.61252],[121.055857,14.609327],[121.055971,14.60916],[121.056222,14.608635],[121.056643,14.607751],[121.056706,14.607619],[121.056752,14.607519],[121.056811,14.607395],[121.05688,14.607238],[121.057232,14.606452],[121.058025,14.604701],[121.058039,14.60467],[121.05909,14.602382],[121.059156,14.602223],[121.059201,14.602112],[121.059261,14.601973],[121.059381,14.601666],[121.059489,14.601315],[121.05953,14.601153],[121.059551,14.601073],[121.059638,14.600739],[121.059687,14.600507],[121.059713,14.600399],[121.059735,14.600263],[121.059809,14.59977],[121.059814,14.599728],[121.059815,14.599645],[121.059884,14.598817],[121.059889,14.598556],[121.05988,14.598129],[121.059865,14.597926],[121.059854,14.597776],[121.059838,14.597633],[121.059787,14.597273],[121.059749,14.596985],[121.059712,14.596793],[121.059658,14.596523],[121.059581,14.596182],[121.059425,14.595752],[121.059285,14.595314],[121.057741,14.590629],[121.057128,14.58878],[121.05687,14.58798],[121.056789,14.587733],[121.056537,14.586963],[121.056435,14.586654],[121.056078,14.585574],[121.05586,14.584936],[121.055824,14.584847],[121.055591,14.584276],[121.055293,14.583551],[121.054949,14.582884], [121.054759,14.58259],[121.054494,14.582216],[121.054382,14.582061],[121.05395,14.581459],[121.053893,14.58138],[121.053803,14.581255],[121.05374,14.581174],[121.053685,14.581091],[121.05357,14.580931],[121.053531,14.580878],[121.053075,14.580244],[121.052888,14.579972],[121.05245,14.579339],[121.052377,14.57924],[121.051928,14.578624],[121.051889,14.578575],[121.051763,14.578388],[121.05158,14.578132],[121.051385,14.577921],[121.05118,14.577641],[121.05052,14.576744],[121.050455,14.576659],[121.049935,14.575971],[121.048949,14.574634],[121.048571,14.574103],[121.048357,14.573803],[121.048081,14.573444],[121.048006,14.573341],[121.047876,14.57316],[121.047634,14.5728],[121.047448,14.572476],[121.047386,14.572352],[121.047167,14.571928],[121.04689,14.571279],[121.046763,14.570941],[121.046693,14.57068],[121.046677,14.570622],[121.046423,14.569674],[121.046282,14.569143],[121.046273,14.569112],[121.046222,14.569049],[121.046169,14.568858],[121.04587,14.567807],[121.045804,14.567504],[121.045597,14.566726],[121.045555,14.566573],[121.045252,14.565509],[121.045135,14.565104],[121.045085,14.564942],[121.045069,14.564896],[121.04499,14.564691],[121.044953,14.564605],[121.044874,14.564419],[121.044741,14.564122],[121.044656,14.563949],[121.044567,14.5638],[121.044379,14.563448],[121.044316,14.563333],[121.044176,14.563096],[121.043949,14.562763],[121.043807,14.562575],[121.043632,14.562346],[121.043434,14.562115],[121.043216,14.561883],[121.043168,14.561831], [121.042953,14.561618],[121.042454,14.561168],[121.041318,14.560217],[121.041097,14.560032],[121.040857,14.559819],[121.040583,14.559574],[121.040395,14.559409],[121.040148,14.559192],[121.039855,14.558943],[121.039642,14.558762],[121.039617,14.55874],[121.039445,14.558594],[121.039355,14.558518],[121.039264,14.558442],[121.03902,14.558238],[121.038974,14.558203],[121.038571,14.557881],[121.03841,14.557728],[121.03789,14.557302],[121.037489,14.55696],[121.037111,14.556634],[121.036795,14.556367],[121.036608,14.556188],[121.036392,14.555981],[121.035897,14.555559],[121.03565,14.555363],[121.035443,14.555191],[121.03514,14.554942],[121.035037,14.554855],[121.034934,14.554772],[121.034741,14.554608],[121.034691,14.554567],[121.03375,14.553766],[121.033235,14.553348],[121.03299,14.553143],[121.032083,14.552361],[121.03116,14.551624],[121.030832,14.55135],[121.029618,14.55035],[121.026394,14.547585],[121.025889,14.547186],[121.025041,14.546507],[121.023749,14.545417],[121.02334,14.545071],[121.021367,14.543399],[121.02,14.542289],[121.019814,14.542155],[121.019191,14.541721],[121.018983,14.541602],[121.018274,14.541157],[121.018093,14.541045],[121.017006,14.540485],[121.016705,14.540347],[121.016416,14.540218],[121.015656,14.539894],[121.015466,14.539819],[121.015282,14.539741],[121.014827,14.539573],[121.014606,14.539496],[121.014382,14.539414],[121.014192,14.539355],[121.01391,14.539273],[121.013614,14.539195],[121.013603,14.539193],[121.013404,14.539096],[121.0134,14.539096],[121.012681,14.53897],[121.012493,14.538939],[121.012109,14.538876],[121.011187,14.538723],[121.010826,14.538673],[121.010735,14.53866],[121.009397,14.538488],[121.008551,14.538368],[121.008091,14.538303],[121.007822,14.538271],
[121.007675,14.538254],[121.006737,14.538128],[121.006691,14.538122],[121.006566,14.538107],[121.006334,14.538078],[121.006061,14.538043],[121.005188,14.537927],[121.004467,14.537837],[121.004409,14.537829],[121.004211,14.537805],[121.004122,14.537794],[121.003314,14.537693],[121.003129,14.53767],[121.002685,14.537612],[121.001539,14.537463],[121.001498,14.537457],[121.001425,14.537448],[121.001257,14.537427],[121.001121,14.537419],[121.000952,14.537409],[121.000659,14.537399],[121.000562,14.537401],[121.000181,14.53742],[120.99969,14.537461],[120.999199,14.537502],[120.998343,14.53757],[120.997508,14.537633],[120.99733,14.537643],[120.997173,14.537645],[120.996712,14.537663],[120.995768,14.537624],[120.995507,14.537598],[120.995486,14.537596],[120.995207,14.537566],[120.994992,14.537526],[120.994185,14.537329],[120.993745,14.537234],[120.99291,14.537046],[120.992764,14.537016],[120.992619,14.536981],[120.992371,14.536933],[120.992264,14.536914],[120.992081,14.536874],[120.992054,14.536868],[120.991638,14.536774],[120.991468,14.536738],[120.990824,14.536594],[120.990338,14.536485],[120.989847,14.536375],[120.989145,14.536218],[120.98905,14.536196],[120.988876,14.536155],[120.988748,14.536126],[120.988353,14.536037],[120.988047,14.535968],[120.987916,14.535939],[120.987696,14.535889],[120.987411,14.535825],[120.987232,14.535785],[120.987127,14.535761],[120.986715,14.535668],[120.985548,14.535405],[120.984991,14.535279],[120.984952,14.535246], [120.984928,14.535201],[120.9849,14.535136],[120.984882,14.535064],[120.984856,14.534994],[120.98482,14.534929],[120.984777,14.534867],[120.984726,14.534812],[120.984669,14.534763],[120.984605,14.534722],[120.984537,14.534688],[120.984467,14.534608],[120.984453,14.534567],[120.98445,14.534515],[120.984476,14.534146],[120.984503,14.533831],[120.984563,14.533147],[120.98457,14.533096],[120.984579,14.533008],[120.984592,14.532868],[120.984625,14.532468],[120.984644,14.532165],[120.984697,14.531526],[120.984703,14.53145],[120.984713,14.53131],[120.984501,14.531288],[120.984382,14.531276],[120.984266,14.531263],[120.984028,14.531239],[120.983722,14.531206],[120.983362,14.531169],[120.983353,14.531307],[120.983351,14.531392],[120.983344,14.53155],[120.983287,14.53291],[120.983284,14.532989],[120.983282,14.533043],[120.983281,14.53309],[120.983276,14.533187],[120.983272,14.533291],[120.983269,14.53336],[120.983265,14.533453],[120.983251,14.533787],[120.983237,14.534154],[120.983206,14.534925],[120.983186,14.535513],[120.983177,14.535756]
]


# list of passenger coordinates
passenger_coordinates_list = [
[121.00561801892769, 14.53897150778912],
  [121.00677371120712, 14.539122681217107],
  [121.0172374120779, 14.542146128104624],
  [121.0233594582763, 14.546711454438679],
  [121.03151177492276, 14.553332521676227],
  [121.0379461704742, 14.558955737837568],
  [121.04300622896383, 14.56324863436442],
  [121.04587984249888, 14.570141279311258],
  [121.05550020047271, 14.587674228993345]
]

# index of the next transport worker coordinate to return
next_transport_coordinate_index = 0

# index of the next passenger coordinate to return
next_passenger_coordinate_index = 0

@app.route('/transport_simulation')
def transport_coordinate():
    global next_transport_coordinate_index

    # get the next transport worker coordinate from the list
    coordinates = {
        "latitude": transport_coordinates_list[next_transport_coordinate_index][1],
        "longitude": transport_coordinates_list[next_transport_coordinate_index][0]
    }

    # increment the index for the next request
    next_transport_coordinate_index = (next_transport_coordinate_index + 1) % len(transport_coordinates_list)

    # return the coordinates as JSON
    return jsonify(coordinates)

# @app.route('/gps', methods=['GET'])
# def get_location():
#     gpgga_info = "$GPGGA,"
#     GPGGA_buffer = 0
#     NMEA_buff = 0
#     lat_in_degrees = 0
#     long_in_degrees = 0

#     while True:
#         received_data = str(ser.readline())  # read NMEA string received
#         GPGGA_data_available = received_data.find(gpgga_info)  # check for NMEA GPGGA string
#         if GPGGA_data_available > 0:
#             GPGGA_buffer = received_data.split("$GPGGA,", 1)[1]  # store data coming after "$GPGGA," string
#             NMEA_buff = GPGGA_buffer.split(',')  # store comma separated data in buffer
#             lat_in_degrees = convert_to_degrees(float(NMEA_buff[1]))  # get latitude in degree decimal format
#             long_in_degrees = convert_to_degrees(float(NMEA_buff[3]))  # get longitude in degree decimal format
#             break

#     data = {"latitude": lat_in_degrees, "longitude": long_in_degrees}
#     return jsonify(data)

# # convert raw NMEA string into degree decimal format
# def convert_to_degrees(raw_value):
    decimal_value = raw_value / 100.00
    degrees = int(decimal_value)
    mm_mmmm = (decimal_value - int(decimal_value)) / 0.6
    position = degrees + mm_mmmm
    position = "%.4f" % position
    return position

  

if __name__ == '__main__':
    app.run()
